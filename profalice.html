<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    Insira nome do aluno <input id="ipt_nome"><br>
    Insira a primeira nota <input id="ipt_nota1"><br>
    Insira a segunda nota <input id="ipt_nota2"><br>
    Insira a terceira nota <input id="ipt_nota3"><br>
    <button onclick="cadastrar()">Cadastrar</button>
    <button onclick="listar()">Listar</button>
    <button onclick="aluno()">Aluno</button>
    <button onclick="lsmedia()">Media</button>
    <button onclick="maiorQue()">Nota maior que</button>
    <div id="div_msg"></div>
</body>
<script>
    let nomeAlunos = []
    let notas1 = [];
    let notas2 = [];
    let notas3 = [];
    let medias = [];

    let alunos = [];

    function cadastrar() {
        div_msg.innerHTML = '';
        let nome = ipt_nome.value;
        let nota1 = ipt_nota1.value;
        let nota2 = ipt_nota2.value;
        let nota3 = ipt_nota3.value;
        let aprovarCadastro = true;
        let nomeExiste = nomeAlunos.includes(nome);
        let msg = '';

        if (nome == '' || nome.length < 9 || nomeExiste == true) {
            msg += `O nome precisa estar preenchido, com mais de 9 caracteres e que ainda não foi cadastrado<br>`
            aprovarCadastro = false;
        }
        if ((nota1 < 0 && nota1 > 10) || nota1 == '') {
            msg += `A nota 1 precisa ser maior que 0 e menor que 10<br>`
            aprovarCadastro = false;
        }
        if ((nota2 < 0 && nota2 > 10) || nota2 == '') {
            msg += `A nota 2 precisa ser maior que 0 e menor que 10<br>`
            aprovarCadastro = false;
        }
        if ((nota3 < 0 && nota3 > 10) || nota3 == '') {
            msg += `A nota 3 precisa ser maior que 0 e menor que 10<br>`
            aprovarCadastro = false;
        }
        div_msg.innerHTML = msg;

        if (aprovarCadastro == true) {

            let json =
            {
                nome: nome,
                notas1: nota1,
                notas2: nota2,
                notas3: nota3,
                media: (Number(nota1) + Number(nota2) + Number(nota3)) / 3
            }
            alunos.push(json);
            div_msg.innerHTML = `Cadastro realizado com sucesso!`
        }
    }

    function listar() {
        div_msg.innerHTML = '';
        if (nomeAlunos.length == 0) {
            div_msg.innerHTML = `Cadastre alunos para ver a lista`
        } else {
            let lista = prompt(`Digite 1 para ver do último para o primeiro ou 2 do primeiro para o último`)
            if (lista == 1) {
                for (let i = (nomeAlunos.length - 1); i >= 0; i--) {
                    div_msg.innerHTML += `Aluno: ${nomeAlunos[i]} – N1: ${notas1[i]} – N2: ${notas2[i]} – N3: ${notas3[i]} – Média: ${((notas1[i] + notas2[i] + notas3[i]) / 3).toFixed(1)} – Listar do último para o primeiro<br>`;
                }
            } else if (lista == 2) {
                for (let i = 0; i < nomeAlunos.length; i++) {
                    div_msg.innerHTML += `Aluno: ${nomeAlunos[i]} – N1: ${notas1[i]} – N2: ${notas2[i]} – N3: ${notas3[i]} – Média: ${((notas1[i] + notas2[i] + notas3[i]) / 3).toFixed(1)} – Listar do primeiro para o último<br>`;
                }
            } else {
                div_msg.innerHTML = `Digite 1 ou 2!`
            }

        }
    }

    function aluno() {
        div_msg.innerHTML = ``
        let pesquisarAluno = prompt(`Qual nome do aluno que você deseja pesquisar`)
        let alunoExiste = false;
        let index = -1;

        for (let i = 0; i < nomeAlunos.length; i++) {
            if (pesquisarAluno == nomeAlunos[i]) {
                alunoExiste = true;
                index = i;
                break;
            }
        }

        if (alunoExiste == false) {
            div_msg.innerHTML = `O aluno solicitado não é cadastrado`
        } else {
            div_msg.innerHTML += `Aluno: ${nomeAlunos[index]} – N1: ${notas1[index]} – N2: ${notas2[index]} – N3: ${notas3[index]} – Média: ${((notas1[index] + notas2[index] + notas3[index]) / 3).toFixed(1)} – Pesquisar aluno<br>`;
        }
    }

    function lsmedia() {
        if (alunos.length > 0) {
            let resultMedia = prompt('Deseja ver a maior média ou a menor média?')
            let menorMedia = 10
            let maiorMedia = 0
            let indexResult = 0

            while (resultMedia != 'maior' && resultMedia != 'menor' && resultMedia != 'Maior' && resultMedia != 'Menor') {
                resultMedia = prompt('Deseja ver a maior média ou a menor média?')
            }

            if (resultMedia == 'Maior' || resultMedia == 'maior') {
                for (let i = 0; i < alunos.length; i++) {
                    if (alunos[i].media > maiorMedia) {
                        maiorMedia = alunos[i].media
                        indexResult = i
                    }
                }

                res.innerHTML = `<br>Aluno: ${alunos[indexResult].nome} – N1: ${alunos[indexResult].notas1} – N2: ${alunos[indexResult].notas2} – N3: ${alunos[indexResult].notas3} – Média: ${alunos[indexResult].media} – Maior média cadastrada <br>`
            } else {
                for (let i = 0; i < alunos.length; i++) {
                    if (alunos[i].media < menorMedia) {
                        menorMedia = alunos[i].media
                        indexResult = i
                    }
                }

                res.innerHTML = `<br>Aluno: ${alunos[indexResult].nome} – N1: ${alunos[indexResult].notas1} – N2: ${alunos[indexResult].notas2} – N3: ${alunos[indexResult].notas3} – Média: ${alunos[indexResult].media} – Menor média cadastrada <br>`
            }
        }
    }

    function maiorQue() {
        res.innerHTML = ''
        
        if (alunos.length > 0) {
            let notaRef = Number(prompt('Informe a nota limite:'))

            for (let i = 0; i < alunos.length; i++) {
                if (alunos[i].notas1 > notaRef || alunos[i].notas2 > notaRef || alunos[i].notas3 > notaRef) {
                    res.innerHTML += `<br> Aluno: ${alunos[i].nome} – N1: ${alunos[i].notas1} – N2: ${alunos[i].notas2} – N3: ${alunos[i].notas3} – Média: ${alunos[i].media} – Pelo menos uma nota maior que ${notaRef} <br>`
                }
            }
        }
    }
</script>

</html>